<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>詞語故事互動自學網：生命中的陽光</title>
    <!-- Tailwind CSS CDN -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Lucide Icons CDN -->
    <script src="https://unpkg.com/lucide@latest"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Noto+Serif+TC:wght@400;700&family=Noto+Sans+TC:wght@400;700&display=swap');
        
        body {
            font-family: 'Noto Sans TC', sans-serif;
        }
        .font-serif {
            font-family: 'Noto Serif TC', serif;
        }
        .slot-active {
            background-color: #eff6ff;
            border-bottom: 2px solid #60a5fa;
            min-width: 80px;
            display: inline-block;
            text-align: center;
            cursor: pointer;
            margin: 0 4px;
            padding: 0 4px;
            transition: all 0.2s;
        }
        .slot-active:hover {
            background-color: #dbeafe;
        }
        .word-correct {
            color: #16a34a;
            font-weight: bold;
        }
        .word-wrong {
            color: #dc2626;
            font-weight: bold;
            text-decoration: line-through;
        }
        .word-pending {
            color: #2563eb;
            font-weight: bold;
        }
        /* Modal Animation */
        .modal-enter {
            animation: fadeIn 0.2s ease-out;
        }
        @keyframes fadeIn {
            from { opacity: 0; transform: scale(0.95); }
            to { opacity: 1; transform: scale(1); }
        }
    </style>
</head>
<body class="bg-stone-50 p-4 md:p-8 text-stone-800">

    <div class="max-w-4xl mx-auto bg-white shadow-lg rounded-xl overflow-hidden border border-stone-200">
        <!-- Header -->
        <header class="bg-blue-600 text-white p-6">
            <h1 class="text-2xl md:text-3xl font-serif font-bold mb-2 text-center">生命的陽光：與文字共舞</h1>
            <p class="text-blue-100 text-center italic text-sm md:text-base">
                請點選詞庫中的詞語，再點擊文章內的挖空處進行填彈。
            </p>
        </header>

        <main class="p-6 md:p-10">
            <!-- Story Content -->
            <div id="story-container" class="prose prose-stone max-w-none leading-relaxed text-lg font-serif mb-10">
                <!-- 故事內容會透過 JS 生成 -->
            </div>

            <!-- Interactive Controls -->
            <div class="flex flex-wrap gap-4 mb-8 justify-center">
                <button id="btn-check" class="flex items-center gap-2 bg-green-600 text-white px-6 py-2 rounded-full hover:bg-green-700 transition shadow-md">
                    <i data-lucide="check-circle"></i> 核對答案
                </button>
                <button id="btn-reset" class="flex items-center gap-2 bg-blue-600 text-white px-6 py-2 rounded-full hover:bg-blue-700 transition shadow-md">
                    <i data-lucide="rotate-ccw"></i> 重新挑戰
                </button>
            </div>

            <!-- Word Bank -->
            <div class="bg-stone-100 rounded-xl p-6">
                <h3 class="text-xl font-bold mb-4 flex items-center gap-2 text-stone-700 border-b border-stone-300 pb-2">
                    <i data-lucide="book-open"></i> 詞庫區 (點擊詞語選取，或點擊 i 圖示了解意思)
                </h3>
                <div id="word-bank" class="flex flex-wrap gap-3">
                    <!-- 詞語按鈕會透過 JS 生成 -->
                </div>
            </div>
        </main>

        <!-- Logic Description Footer -->
        <footer class="max-w-4xl mx-auto m-6 bg-blue-50 border border-blue-100 rounded-lg p-4 text-sm text-blue-800">
            <h4 class="font-bold mb-2 flex items-center gap-2">
                <i data-lucide="help-circle" class="w-4 h-4"></i> 互動式自學說明
            </h4>
            <ul class="list-disc list-inside space-y-1">
                <li><strong>填入詞語：</strong>先點擊下方的詞語按鈕，再點選文章中的空格。</li>
                <li><strong>查看詳細：</strong>點擊詞語右側的藍色資訊圖示 (i)，可查看詞義、故事與例句。</li>
                <li><strong>結果判定：</strong>核對後，<span class="text-green-600 font-bold">綠色</span>為正確，<span class="text-red-600 font-bold">紅色刪除線</span>為錯誤。</li>
            </ul>
        </footer>
    </div>

    <!-- Info Modal -->
    <div id="modal-overlay" class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50 hidden">
        <div class="bg-white rounded-2xl max-w-md w-full p-6 shadow-2xl modal-enter">
            <div class="flex justify-between items-start mb-4">
                <h2 id="modal-title" class="text-3xl font-bold text-blue-600"></h2>
                <button id="modal-close" class="text-stone-400 hover:text-stone-600 text-2xl">&times;</button>
            </div>
            <div class="space-y-4">
                <div>
                    <h4 class="font-bold text-stone-500 text-sm uppercase">意思：</h4>
                    <p id="modal-meaning" class="text-stone-700"></p>
                </div>
                <div>
                    <h4 class="font-bold text-stone-500 text-sm uppercase">背後的小故事：</h4>
                    <p id="modal-story" class="text-stone-700 bg-blue-50 p-3 rounded-lg italic"></p>
                </div>
                <div>
                    <h4 class="font-bold text-stone-500 text-sm uppercase">例句：</h4>
                    <p id="modal-example" class="text-stone-700"></p>
                </div>
            </div>
            <button id="modal-confirm" class="mt-6 w-full bg-stone-800 text-white py-2 rounded-xl hover:bg-stone-900 transition">
                我知道了！
            </button>
        </div>
    </div>

    <script>
        // --- 資料定義 ---
        const vocabData = [
            { id: 1, word: "簽名", meaning: "簽署名字。", example: "這本書的作者，近日正在各地舉辦新書簽名活動。", story: "想像你的名字是你的『品牌印章』，每當你在紙上落下筆尖，就是對這份文件或作品負起責任的開始。" },
            { id: 2, word: "傻瓜", meaning: "指愚笨的人，多用來罵人或開玩笑。有時帶有憐惜的意味。", example: "你別老是說他是傻瓜，其實他一點兒也不傻。", story: "有時候，那些看起來笨笨地朝著目標努力的人，被稱為『傻瓜』，但往往是這些人才會成功喔！" },
            { id: 3, word: "神態自若", meaning: "神情態度從容不迫，一如平常的樣子。", example: "看他一副神態自若的樣子，想必對比賽有十足的把握。", story: "這是一個人內心強大的表現。即使外面風大雨大，內心依然像平靜的湖水一樣。" },
            { id: 4, word: "繼續", meaning: "連續而不間斷。", example: "在比賽中領先而能繼續努力的人，才是最後的勝利者。", story: "這像是一場馬拉松，不求起跑最快，但求腳步不停。" },
            { id: 5, word: "腦性麻痺", meaning: "泛指所有腦部損傷的疾病。共通性是肌肉不能協調，導致行動遲緩、動作笨拙等。", example: "我們要用更多的愛與關懷，讓腦性麻痺的患者感受到社會的溫暖。", story: "你可以想像大腦是一個發號司令的將軍，但傳令兵迷路了，所以身體的士兵收不到正確的指令，這需要很大的耐心來練習協調。" },
            { id: 6, word: "患者", meaning: "生病或受傷而需要醫療救護者。", example: "最近流行性感冒盛行，前往醫院求診的患者很多。", story: "患字下面有一個『心』，代表他們的心靈也需要被呵護，而不僅僅是身體上的治療。" },
            { id: 7, word: "艱辛", meaning: "困難辛苦。", example: "儘管過程備極艱辛，他還是咬緊牙根，完成了這項任務。", story: "『艱』是困難，『辛』是辛辣。生活有時像吃下一口辣椒，雖然難受，但流過汗後會變得更堅強。" },
            { id: 8, word: "博士", meaning: "現今最高的學位。或舊時對專業人員的尊稱。", example: "他在專業領域上努力研讀，終於獲得法學博士學位。", story: "博士不僅是學位，更代表在某個領域裡，你像是一座挖掘到地底深處的寶庫。" },
            { id: 9, word: "聆聽", meaning: "注意聽。", example: "街頭藝人在廣場上演奏小提琴，來往行人都不禁駐足聆聽這美妙的音樂。", story: "聽字包含了耳、王、十、四、一、心。代表聆聽是用耳朵當王，一心一意地感受對方的聲音。" },
            { id: 10, word: "埋怨", meaning: "抱怨、責怪。", example: "當我遇到挫折時，叔叔常鼓勵我：『弱者埋怨逆境，強者克服逆境』。", story: "這是一種負能量的釋放，但聰明的人會把埋怨的時間拿來尋找解決方案。" },
            { id: 11, word: "寫稿", meaning: "寫作文章。", example: "他辭去工作後，專心以寫稿為業。", story: "稿子以前是用稻草編織般的慎重，現在則是用文字編織思想的過程。" },
            { id: 12, word: "如雷", meaning: "比喻聲音很大。", example: "這齣話劇終場時，觀眾掌聲如雷，演員頻頻出來謝幕。", story: "想像天空中的雷聲，那是震撼人心、無法被忽視的力量。" },
            { id: 13, word: "擔任", meaning: "擔負某種職務及責任。", example: "他在擔任總經理職務期間，將公司整治得有條不紊。", story: "『擔』是肩膀上的擔子。這告訴我們，每一個職位都有一份重量需要我們扛起。" },
            { id: 14, word: "高談闊論", meaning: "暢快而無拘束的談論。", example: "這幾位客人便高談闊論，各抒己見起來。", story: "像是飛鳥在廣闊的天空中飛行，沒有束縛，自由自在地分享想法。" },
            { id: 15, word: "口若懸河", meaning: "比喻能言善道，說話滔滔不絕。", example: "他很健談，發表高論時口若懸河。", story: "想像瀑布從高處落下，水流永不停歇，形容說話非常有節奏感且豐富。" },
            { id: 16, word: "標點符號", meaning: "用來分別句讀和標明詞句性質的符號。", example: "不要小看標點符號，標錯了，語意會大有不同。", story: "它們是文字的交通警察，告訴你哪裡該停、哪裡該轉彎、哪裡要大聲驚呼。" },
        ];

        const correctOrder = [9, 13, 5, 6, 7, 8, 11, 16, 10, 15, 14, 2, 3, 12, 4, 1];

        // --- 狀態管理 ---
        let selectedWord = null;
        let droppedWords = Array(16).fill(null);
        let isSubmitted = false;

        // --- DOM 元素 ---
        const storyContainer = document.getElementById('story-container');
        const wordBank = document.getElementById('word-bank');
        const btnCheck = document.getElementById('btn-check');
        const btnReset = document.getElementById('btn-reset');
        const modalOverlay = document.getElementById('modal-overlay');

        // --- 初始化函數 ---
        function init() {
            renderStory();
            renderWordBank();
            lucide.createIcons(); // 渲染圖示
            
            // 綁定按鈕事件
            btnCheck.addEventListener('click', checkAnswers);
            btnReset.addEventListener('click', resetApp);
            document.getElementById('modal-close').onclick = closeModal;
            document.getElementById('modal-confirm').onclick = closeModal;
        }

        // --- 渲染故事 ---
        function renderStory() {
            const html = `
                <p class="mb-4">
                    禮堂的燈光漸漸暗下，我們都在安靜地 ${renderSlotHTML(0)}
                    那位神祕演講者的聲音。今天學校邀請了一位特別的老師，他將
                    ${renderSlotHTML(1)} 本學期的心靈導師。當門緩緩打開，推著輪椅進來的竟是一位
                    ${renderSlotHTML(2)} ${renderSlotHTML(3)}。
                </p>
                <p class="mb-4">
                    校長介紹說，這位老師在成長過程中經歷了無數的 ${renderSlotHTML(4)}
                    ，但他從不放棄，甚至取得了一般人都難以獲得的 ${renderSlotHTML(5)}
                    學位。他每天的生活就是不停地 ${renderSlotHTML(6)}
                    ，儘管指尖顫抖，他仍仔細校對每一個 ${renderSlotHTML(7)}。他曾說，他不會
                    ${renderSlotHTML(8)} 命運的不公，因為文字給了他翅膀。
                </p>
                <p class="mb-4">
                    雖然他的發音不夠精準，無法像廣播主持那樣 ${renderSlotHTML(9)} 或是針對世界局勢
                    ${renderSlotHTML(10)} ，但在我們眼裡，他絕對不是個 ${renderSlotHTML(11)}
                    。他在台上分享時，那種 ${renderSlotHTML(12)} 的神情，感染了現場每一個人。
                </p>
                <p class="mb-4">
                    當演講結束，禮堂內響起了 ${renderSlotHTML(13)}
                    般的掌聲。大家站起身，紛紛表示要
                    ${renderSlotHTML(14)} 支持他的夢想。最後，同學們排起長隊，希望能得到他的親筆
                    ${renderSlotHTML(15)}，留下這份永恆的記憶。
                </p>
            `;
            storyContainer.innerHTML = html;
        }

        function renderSlotHTML(index) {
            const wordObj = droppedWords[index];
            let content = " (點此填入) ";
            let className = "slot-active";

            if (wordObj) {
                content = wordObj.word;
                if (isSubmitted) {
                    className += (wordObj.id === correctOrder[index]) ? " word-correct" : " word-wrong";
                } else {
                    className += " word-pending";
                }
            }

            return `<span class="${className}" onclick="handleSlotClick(${index})">${content}</span>`;
        }

        // --- 渲染詞庫 ---
        function renderWordBank() {
            // 打亂詞庫順序
            const shuffled = [...vocabData].sort(() => Math.random() - 0.5);
            wordBank.innerHTML = '';
            
            shuffled.forEach(v => {
                const btn = document.createElement('div');
                btn.className = 'relative group';
                
                const isSelected = selectedWord?.id === v.id;
                const activeClass = isSelected ? 'bg-blue-600 text-white border-blue-700 scale-105' : 'bg-white text-blue-600 border-blue-200 hover:border-blue-400';
                const disabledClass = isSubmitted ? 'opacity-50 cursor-not-allowed' : '';

                btn.innerHTML = `
                    <button onclick='handleWordSelect(${v.id})' 
                            class="px-4 py-2 rounded-md border-2 transition-all flex items-center gap-2 ${activeClass} ${disabledClass}"
                            ${isSubmitted ? 'disabled' : ''}>
                        ${v.word}
                        <span onclick="showInfo(event, ${v.id})" class="cursor-help text-stone-400 hover:text-blue-500">
                            <i data-lucide="info" class="w-4 h-4"></i>
                        </span>
                    </button>
                `;
                wordBank.appendChild(btn);
            });
            lucide.createIcons();
        }

        // --- 互動邏輯 ---
        window.handleWordSelect = function(id) {
            if (isSubmitted) return;
            selectedWord = vocabData.find(v => v.id === id);
            renderWordBank();
        };

        window.handleSlotClick = function(index) {
            if (isSubmitted || !selectedWord) return;
            droppedWords[index] = selectedWord;
            selectedWord = null;
            renderStory();
            renderWordBank();
        };

        function checkAnswers() {
            isSubmitted = true;
            renderStory();
            renderWordBank();
        }

        function resetApp() {
            droppedWords = Array(16).fill(null);
            selectedWord = null;
            isSubmitted = false;
            renderStory();
            renderWordBank();
        }

        // --- Modal 控制 ---
        window.showInfo = function(event, id) {
            event.stopPropagation(); // 防止觸發按鈕點擊
            const v = vocabData.find(item => item.id === id);
            document.getElementById('modal-title').innerText = v.word;
            document.getElementById('modal-meaning').innerText = v.meaning;
            document.getElementById('modal-story').innerText = v.story;
            document.getElementById('modal-example').innerText = v.example;
            modalOverlay.classList.remove('hidden');
        };

        function closeModal() {
            modalOverlay.classList.add('hidden');
        }

        // 啟動程式
        window.onload = init;
    </script>
</body>
</html>